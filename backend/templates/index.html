{% extends "base.html" %}

{% block title %}Dashboard - Mindful Eating Agent{% endblock %}

{% block content %}
<header>
    <div class="header-content">
        <div class="logo">ğŸ½ï¸ Mindful Eating Agent</div>
        <nav>
            <span class="user-greeting">Welcome, {{ user_name }}!</span>
            <a href="{{ url_for('index') }}">Dashboard</a>
            <a href="{{ url_for('logout') }}">Logout</a>
        </nav>
    </div>
</header>

<div class="container">
    <div class="dashboard">
        <!-- Food Input Section -->
        <div class="card food-input-section">
            <h3>ğŸ“ Log Your Meal</h3>
            <div class="food-input-form">
                <input type="text" id="foodInput"
                    placeholder="e.g., grilled chicken 6oz with brown rice 1 cup and broccoli" class="form-group"
                    autocomplete="off">
                <select id="mealType" class="form-group">
                    <option value="breakfast">Breakfast</option>
                    <option value="lunch">Lunch</option>
                    <option value="dinner">Dinner</option>
                    <option value="snack">Snack</option>
                </select>
                <button onclick="logFood()" class="btn">Log Food</button>
            </div>

            <div id="results" class="results"></div>

            <div
                style="margin-top: 20px; padding: 15px; background: #f0f7ff; border-radius: 10px; font-size: 13px; color: #4a5568;">
                <strong>ğŸ’¡ Tips:</strong> Be specific with portions (e.g., "6oz", "1 cup", "100g").
                The AI understands natural language like "grilled chicken breast with steamed broccoli and brown rice".
            </div>
        </div>

        <!-- Daily Progress -->
        <div class="card">
            <h3>ğŸ“Š Today's Progress</h3>
            <div class="progress-section" id="calorieProgress">
                <div class="loading pulse">Loading...</div>
            </div>
            <div class="progress-section" id="proteinProgress">
                <div class="loading pulse">Loading...</div>
            </div>
            <div id="macroBreakdown"></div>
        </div>

        <!-- AI Recommendations -->
        <div class="card">
            <h3>ğŸ’¡ AI Recommendations</h3>
            <div id="recommendations">
                <div class="loading pulse">Analyzing your patterns...</div>
            </div>
        </div>

        <!-- Today's Meals -->
        <div class="card">
            <h3>ğŸ´ Today's Meals</h3>
            <div id="todayLogs">
                <div class="loading pulse">Loading meals...</div>
            </div>
        </div>

        <!-- Pattern Insights -->
        <div class="card">
            <h3>ğŸ§  Pattern Insights</h3>
            <div class="empty-state">
                <div class="empty-state-icon">ğŸ“ˆ</div>
                <p>Keep logging meals to see your eating patterns!</p>
                <p style="font-size: 13px; margin-top: 10px;">
                    The AI learns from your habits and provides personalized insights after a few days of consistent
                    logging.
                </p>
            </div>
        </div>

        <!-- Quick Stats -->
        <div class="card">
            <h3>âš¡ Quick Stats</h3>
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
                <div style="text-align: center; padding: 20px; background: #f7fafc; border-radius: 12px;">
                    <div style="font-size: 32px; font-weight: 700; color: #667eea;">0</div>
                    <div style="font-size: 13px; color: #718096; margin-top: 5px;">Meals This Week</div>
                </div>
                <div style="text-align: center; padding: 20px; background: #f7fafc; border-radius: 12px;">
                    <div style="font-size: 32px; font-weight: 700; color: #667eea;">0</div>
                    <div style="font-size: 13px; color: #718096; margin-top: 5px;">Day Streak</div>
                </div>
            </div>
            <div
                style="margin-top: 20px; padding: 15px; background: #f0fff4; border-radius: 10px; text-align: center; color: #48bb78; font-size: 14px;">
                <strong>ğŸ¯ Goal:</strong> Build consistent healthy eating habits
            </div>
        </div>
    </div>
</div>
{% endblock %}